{
	"info": {
		"_postman_id": "axn-group-api-collection",
		"name": "AXN Group API Collection - Updated",
		"description": "Complete API collection for Agent-Leader-Admin system with role-based access control and clean response structures. Admin creates leaders, leaders create agents, agents onboard shops.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{auth_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000/api",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "leader_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "agent_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "shop_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "bank_transfer_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Admin Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.token) {",
									"        pm.collectionVariables.set('admin_token', responseJson.data.token);",
									"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
									"        pm.collectionVariables.set('user_id', responseJson.data.user.id);",
									"        console.log('Admin token saved:', responseJson.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobile\": \"9999999999\",\n    \"password\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login/admin",
							"host": ["{{base_url}}"],
							"path": ["auth", "login", "admin"]
						}
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"9999999999\",\n    \"password\": \"password\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/admin",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "admin"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"message\": \"Admin login successful\",\n    \"data\": {\n        \"user\": {\n            \"id\": 1,\n            \"unique_id\": \"AXN00001\",\n            \"name\": \"Admin User\",\n            \"mobile\": \"9999999999\",\n            \"email\": null,\n            \"role\": \"admin\",\n            \"is_blocked\": false,\n            \"created_at\": \"2025-01-01T00:00:00.000000Z\",\n            \"updated_at\": \"2025-01-01T00:00:00.000000Z\"\n        },\n        \"token\": \"1|abcdefg123456789\",\n        \"token_type\": \"Bearer\"\n    }\n}"
						}
					]
				},
				{
					"name": "Leader Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.token) {",
									"        pm.collectionVariables.set('leader_token', responseJson.data.token);",
									"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
									"        pm.collectionVariables.set('user_id', responseJson.data.user.id);",
									"        console.log('Leader token saved:', responseJson.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobile\": \"8888888888\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login/leader",
							"host": ["{{base_url}}"],
							"path": ["auth", "login", "leader"]
						}
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"8888888888\",\n    \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/leader",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "leader"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"message\": \"Login successful\",\n    \"data\": {\n        \"user\": {\n            \"id\": 2,\n            \"unique_id\": \"AXN00002\",\n            \"name\": \"Team Leader\",\n            \"mobile\": \"8888888888\",\n            \"email\": \"leader@example.com\",\n            \"role\": \"leader\",\n            \"referral_code\": null,\n            \"is_blocked\": false,\n            \"wallet_balance\": \"0.00\",\n            \"created_at\": \"2025-01-01T00:00:00.000000Z\",\n            \"updated_at\": \"2025-01-01T00:00:00.000000Z\"\n        },\n        \"token\": \"2|xyz789def456\",\n        \"token_type\": \"Bearer\"\n    }\n}"
						}
					]
				},
				{
					"name": "Agent Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.token) {",
									"        pm.collectionVariables.set('agent_token', responseJson.data.token);",
									"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
									"        pm.collectionVariables.set('user_id', responseJson.data.user.id);",
									"        console.log('Agent token saved:', responseJson.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobile\": \"7777777777\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login/agent",
							"host": ["{{base_url}}"],
							"path": ["auth", "login", "agent"]
						}
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"7777777777\",\n    \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/agent",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "agent"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"message\": \"Login successful\",\n    \"data\": {\n        \"user\": {\n            \"id\": 3,\n            \"unique_id\": \"AXN00003\",\n            \"name\": \"Sales Agent\",\n            \"mobile\": \"7777777777\",\n            \"email\": \"agent@example.com\",\n            \"role\": \"agent\",\n            \"referral_code\": \"REF001\",\n            \"is_blocked\": false,\n            \"wallet_balance\": \"0.00\",\n            \"created_at\": \"2025-01-01T00:00:00.000000Z\",\n            \"updated_at\": \"2025-01-01T00:00:00.000000Z\"\n        },\n        \"token\": \"3|qwe456rty789\",\n        \"token_type\": \"Bearer\"\n    }\n}"
						}
					]
				},
				{
					"name": "Register Leader (Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Team Leader\",\n    \"mobile\": \"8888888888\",\n    \"email\": \"leader@axngroup.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register/leader",
							"host": ["{{base_url}}"],
							"path": ["auth", "register", "leader"]
						}
					},
					"response": []
				},
				{
					"name": "Register Agent (Leader Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Sales Agent\",\n    \"mobile\": \"7777777777\",\n    \"email\": \"agent@axngroup.com\",\n    \"password\": \"password123\",\n    \"referral_code\": \"REF001\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register/agent",
							"host": ["{{base_url}}"],
							"path": ["auth", "register", "agent"]
						}
					},
					"response": []
				},
				{
					"name": "Get Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["auth", "profile"]
						}
					},
					"response": [
						{
							"name": "Agent/Leader Profile Response",
							"originalRequest": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{auth_token}}", "type": "string"}]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/auth/profile",
									"host": ["{{base_url}}"],
									"path": ["auth", "profile"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": 2,\n        \"unique_id\": \"AXN00002\",\n        \"name\": \"Sudipto\",\n        \"mobile\": \"8509435513\",\n        \"email\": null,\n        \"role\": \"agent\",\n        \"referral_code\": null,\n        \"is_blocked\": false,\n        \"wallet_balance\": \"0.00\",\n        \"created_at\": \"2025-08-16T20:26:41.000000Z\",\n        \"updated_at\": \"2025-08-16T20:26:41.000000Z\",\n        \"profile\": null\n    }\n}"
						}
					]
				},
				{
					"name": "Logout",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["auth", "logout"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Wallet",
			"item": [
				{
					"name": "Get Balance",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wallet/balance",
							"host": ["{{base_url}}"],
							"path": ["wallet", "balance"]
						}
					},
					"response": []
				},
				{
					"name": "Get Transactions",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wallet/transactions",
							"host": ["{{base_url}}"],
							"path": ["wallet", "transactions"]
						}
					},
					"response": []
				},
				{
					"name": "Request Withdrawal (Agent/Leader)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"amount\": 1000.50\n}"
						},
						"url": {
							"raw": "{{base_url}}/wallet/withdraw",
							"host": ["{{base_url}}"],
							"path": ["wallet", "withdraw"]
						}
					},
					"response": []
				},
				{
					"name": "Get Withdrawals",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wallet/withdrawals",
							"host": ["{{base_url}}"],
							"path": ["wallet", "withdrawals"]
						}
					},
					"response": []
				},
				{
					"name": "Credit Wallet (Leader/Admin)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": 3,\n    \"amount\": 500.00,\n    \"reference_type\": \"bank_transfer\",\n    \"reference_id\": 1,\n    \"remark\": \"Commission credit\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wallet/credit",
							"host": ["{{base_url}}"],
							"path": ["wallet", "credit"]
						}
					},
					"response": []
				},
				{
					"name": "Get Payout History (Agent)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{agent_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wallet/payouts?type=onboarding_payout",
							"host": ["{{base_url}}"],
							"path": ["wallet", "payouts"],
							"query": [
								{
									"key": "type",
									"value": "onboarding_payout",
									"description": "Filter by payout type: onboarding_payout or bank_transfer_payout"
								}
							]
						}
					},
					"response": [
						{
							"name": "Payout History Response",
							"originalRequest": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{agent_token}}", "type": "string"}]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/wallet/payouts",
									"host": ["{{base_url}}"],
									"path": ["wallet", "payouts"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"summary\": {\n            \"total_onboarding_payout\": 440,\n            \"total_bank_transfer_payout\": 330,\n            \"total_payout\": 770,\n            \"this_month_payout\": 200\n        },\n        \"transactions\": [\n            {\n                \"id\": 1,\n                \"wallet_id\": 1,\n                \"type\": \"credit\",\n                \"amount\": \"240.00\",\n                \"reference_type\": \"onboarding_payout\",\n                \"reference_id\": 5,\n                \"remark\": \"Onboarding payout commission - â‚¹240\",\n                \"created_at\": \"2025-08-17T10:30:00.000000Z\"\n            }\n        ],\n        \"grouped_by_month\": {\n            \"2025-08\": [\n                {\n                    \"amount\": \"240.00\",\n                    \"reference_type\": \"onboarding_payout\",\n                    \"created_at\": \"2025-08-17T10:30:00.000000Z\"\n                }\n            ]\n        }\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "Shop",
			"item": [
				{
					"name": "Create Shop (Agent Only)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.id) {",
									"        pm.collectionVariables.set('shop_id', responseJson.data.id);",
									"        console.log('Shop ID saved:', responseJson.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{agent_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customer_name\": \"Shop Owner\",\n    \"customer_mobile\": \"9876543210\",\n    \"team_leader_id\": \"{{user_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/shops",
							"host": ["{{base_url}}"],
							"path": ["shops"]
						}
					},
					"response": []
				},
				{
					"name": "Get Agent's Shops",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/shops/agent",
							"host": ["{{base_url}}"],
							"path": ["shops", "agent"]
						}
					},
					"response": []
				},
				{
					"name": "Get Leader's Shops",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/shops/leader",
							"host": ["{{base_url}}"],
							"path": ["shops", "leader"]
						}
					},
					"response": []
				},
				{
					"name": "Update Shop Status (Leader Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{leader_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"approved\",\n    \"reject_remark\": \"Ready for admin approval\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/shops/{{shop_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["shops", "{{shop_id}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Get Shop Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/shops/{{shop_id}}",
							"host": ["{{base_url}}"],
							"path": ["shops", "{{shop_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Get Pending Shops for Admin",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/shops/admin/pending",
							"host": ["{{base_url}}"],
							"path": ["shops", "admin", "pending"]
						}
					},
					"response": []
				},
				{
					"name": "Admin Approval for Shop",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.id) {",
									"        pm.collectionVariables.set('shop_id', responseJson.data.id);",
									"        console.log('Shop ID saved:', responseJson.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"admin_approved\",\n    \"admin_remark\": \"Approved for payout calculation\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/shops/admin/{{shop_id}}/approval",
							"host": ["{{base_url}}"],
							"path": ["shops", "admin", "{{shop_id}}", "approval"]
						}
					},
					"response": [
						{
							"name": "Admin Approval Success Response",
							"originalRequest": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{admin_token}}", "type": "string"}]
								},
								"method": "PUT",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"status\": \"admin_approved\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/shops/admin/1/approval",
									"host": ["{{base_url}}"],
									"path": ["shops", "admin", "1", "approval"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"message\": \"Shop admin approval updated successfully\",\n    \"data\": {\n        \"id\": 1,\n        \"agent_id\": 3,\n        \"team_leader_id\": 2,\n        \"customer_name\": \"Shop Owner\",\n        \"customer_mobile\": \"9876543210\",\n        \"status\": \"admin_approved\",\n        \"reject_remark\": null,\n        \"created_at\": \"2025-08-17T10:00:00.000000Z\",\n        \"updated_at\": \"2025-08-17T10:30:00.000000Z\",\n        \"agent\": {\n            \"id\": 3,\n            \"name\": \"Sales Agent\",\n            \"mobile\": \"7777777777\"\n        },\n        \"team_leader\": {\n            \"id\": 2,\n            \"name\": \"Team Leader\",\n            \"mobile\": \"8888888888\"\n        }\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "Bank Transfer",
			"item": [
				{
					"name": "Create Bank Transfer (Agent Only)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.id) {",
									"        pm.collectionVariables.set('bank_transfer_id', responseJson.data.id);",
									"        console.log('Bank Transfer ID saved:', responseJson.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{agent_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customer_name\": \"Customer Name\",\n    \"customer_mobile\": \"9876543210\",\n    \"amount\": 150000.00,\n    \"team_leader_id\": \"{{user_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/bank-transfers",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers"]
						}
					},
					"response": []
				},
				{
					"name": "Get Agent's Bank Transfers",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/bank-transfers/agent",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "agent"]
						}
					},
					"response": []
				},
				{
					"name": "Get Leader's Bank Transfers",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/bank-transfers/leader",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "leader"]
						}
					},
					"response": []
				},
				{
					"name": "Update Bank Transfer Status (Leader Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{leader_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"approved\",\n    \"amount_change_remark\": \"Amount verified\",\n    \"reject_remark\": null\n}"
						},
						"url": {
							"raw": "{{base_url}}/bank-transfers/{{bank_transfer_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "{{bank_transfer_id}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Get Bank Transfer Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/bank-transfers/{{bank_transfer_id}}",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "{{bank_transfer_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Get Pending Bank Transfers for Admin",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/bank-transfers/admin/pending",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "admin", "pending"]
						}
					},
					"response": []
				},
				{
					"name": "Admin Approval for Bank Transfer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.data.id) {",
									"        pm.collectionVariables.set('bank_transfer_id', responseJson.data.id);",
									"        console.log('Bank Transfer ID saved:', responseJson.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"admin_approved\",\n    \"admin_remark\": \"Approved for payout calculation\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/bank-transfers/admin/{{bank_transfer_id}}/approval",
							"host": ["{{base_url}}"],
							"path": ["bank-transfers", "admin", "{{bank_transfer_id}}", "approval"]
						}
					},
					"response": [
						{
							"name": "Admin Approval Success Response",
							"originalRequest": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{admin_token}}", "type": "string"}]
								},
								"method": "PUT",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"status\": \"admin_approved\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/bank-transfers/admin/1/approval",
									"host": ["{{base_url}}"],
									"path": ["bank-transfers", "admin", "1", "approval"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"success\": true,\n    \"message\": \"Bank transfer admin approval updated successfully\",\n    \"data\": {\n        \"id\": 1,\n        \"agent_id\": 3,\n        \"team_leader_id\": 2,\n        \"customer_name\": \"Customer Name\",\n        \"customer_mobile\": \"9876543210\",\n        \"amount\": \"150000.00\",\n        \"status\": \"admin_approved\",\n        \"amount_change_remark\": null,\n        \"reject_remark\": null,\n        \"created_at\": \"2025-08-17T10:00:00.000000Z\",\n        \"updated_at\": \"2025-08-17T10:30:00.000000Z\",\n        \"agent\": {\n            \"id\": 3,\n            \"name\": \"Sales Agent\",\n            \"mobile\": \"7777777777\"\n        },\n        \"team_leader\": {\n            \"id\": 2,\n            \"name\": \"Team Leader\",\n            \"mobile\": \"8888888888\"\n        }\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "Profile",
			"item": [
				{
					"name": "Get Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile",
							"host": ["{{base_url}}"],
							"path": ["profile"]
						}
					},
					"response": []
				},
				{
					"name": "Update Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "aadhar_number",
									"value": "123456789012",
									"type": "text"
								},
								{
									"key": "pan_number",
									"value": "ABCDE1234F",
									"type": "text"
								},
								{
									"key": "address",
									"value": "Complete address",
									"type": "text"
								},
								{
									"key": "dob",
									"value": "1990-01-01",
									"type": "text"
								},
								{
									"key": "agent_photo",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/profile/update",
							"host": ["{{base_url}}"],
							"path": ["profile", "update"]
						}
					},
					"response": []
				},
				{
					"name": "Add Bank Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"account_holder_name\": \"Account Holder\",\n    \"bank_name\": \"Bank Name\",\n    \"account_number\": \"1234567890\",\n    \"confirm_account_number\": \"1234567890\",\n    \"ifsc_code\": \"BANK0001234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/bank-details",
							"host": ["{{base_url}}"],
							"path": ["profile", "bank-details"]
						}
					},
					"response": []
				},
				{
					"name": "Get Bank Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile/bank-details",
							"host": ["{{base_url}}"],
							"path": ["profile", "bank-details"]
						}
					},
					"response": []
				},
				{
					"name": "Update Bank Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"account_holder_name\": \"Updated Holder\",\n    \"bank_name\": \"Updated Bank\",\n    \"account_number\": \"9876543210\",\n    \"confirm_account_number\": \"9876543210\",\n    \"ifsc_code\": \"BANK0009876\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/bank-details/1",
							"host": ["{{base_url}}"],
							"path": ["profile", "bank-details", "1"]
						}
					},
					"response": []
				},
				{
					"name": "Delete Bank Details",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile/bank-details/1",
							"host": ["{{base_url}}"],
							"path": ["profile", "bank-details", "1"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Admin Dashboard",
			"item": [
				{
					"name": "Switch to Admin Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.collectionVariables.set('auth_token', pm.collectionVariables.get('admin_token'));",
									"console.log('Switched to Admin token');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["auth", "profile"]
						}
					}
				},
				{
					"name": "Switch to Leader Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.collectionVariables.set('auth_token', pm.collectionVariables.get('leader_token'));",
									"console.log('Switched to Leader token');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["auth", "profile"]
						}
					}
				},
				{
					"name": "Switch to Agent Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.collectionVariables.set('auth_token', pm.collectionVariables.get('agent_token'));",
									"console.log('Switched to Agent token');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["auth", "profile"]
						}
					}
				},
				{
					"name": "Get Admin Dashboard Overview",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/shops/admin/daily-reports?days=7",
							"host": ["{{base_url}}"],
							"path": ["shops", "admin", "daily-reports"],
							"query": [
								{
									"key": "days",
									"value": "7"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Workflow Testing",
			"item": [
				{
					"name": "Complete Agent-Leader-Admin Workflow",
					"item": [
						{
							"name": "1. Agent Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const responseJson = pm.response.json();",
											"    if (responseJson.success && responseJson.data.token) {",
											"        pm.collectionVariables.set('agent_token', responseJson.data.token);",
											"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
											"        pm.collectionVariables.set('user_id', responseJson.data.user.id);",
											"        console.log('âœ… Step 1: Agent logged in successfully');",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"7777777777\",\n    \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/agent",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "agent"]
								}
							}
						},
						{
							"name": "2. Create Shop Onboarding",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const responseJson = pm.response.json();",
											"    if (responseJson.success && responseJson.data.id) {",
											"        pm.collectionVariables.set('shop_id', responseJson.data.id);",
											"        console.log('âœ… Step 2: Shop onboarding created with ID:', responseJson.data.id);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{agent_token}}", "type": "string"}]
								},
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"customer_name\": \"Test Shop Owner\",\n    \"customer_mobile\": \"9876543210\",\n    \"team_leader_id\": 2\n}"
								},
								"url": {
									"raw": "{{base_url}}/shops",
									"host": ["{{base_url}}"],
									"path": ["shops"]
								}
							}
						},
						{
							"name": "3. Leader Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const responseJson = pm.response.json();",
											"    if (responseJson.success && responseJson.data.token) {",
											"        pm.collectionVariables.set('leader_token', responseJson.data.token);",
											"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
											"        console.log('âœ… Step 3: Leader logged in successfully');",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"8888888888\",\n    \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/leader",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "leader"]
								}
							}
						},
						{
							"name": "4. Leader Approves Shop",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('âœ… Step 4: Leader approved the shop');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{leader_token}}", "type": "string"}]
								},
								"method": "PUT",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"status\": \"approved\",\n    \"reject_remark\": null\n}"
								},
								"url": {
									"raw": "{{base_url}}/shops/{{shop_id}}/status",
									"host": ["{{base_url}}"],
									"path": ["shops", "{{shop_id}}", "status"]
								}
							}
						},
						{
							"name": "5. Admin Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const responseJson = pm.response.json();",
											"    if (responseJson.success && responseJson.data.token) {",
											"        pm.collectionVariables.set('admin_token', responseJson.data.token);",
											"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
											"        console.log('âœ… Step 5: Admin logged in successfully');",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mobile\": \"9999999999\",\n    \"password\": \"password\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login/admin",
									"host": ["{{base_url}}"],
									"path": ["auth", "login", "admin"]
								}
							}
						},
						{
							"name": "6. Admin Final Approval (Triggers Payout)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('ðŸŽ‰ Step 6: Admin approved - PAYOUT TRIGGERED!');",
											"    console.log('Agent will receive onboarding payout based on monthly slab');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{admin_token}}", "type": "string"}]
								},
								"method": "PUT",
								"header": [{"key": "Content-Type", "value": "application/json"}],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"status\": \"admin_approved\",\n    \"admin_remark\": \"Workflow test - payout triggered\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/shops/admin/{{shop_id}}/approval",
									"host": ["{{base_url}}"],
									"path": ["shops", "admin", "{{shop_id}}", "approval"]
								}
							}
						},
						{
							"name": "7. Check Agent Payout History",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const responseJson = pm.response.json();",
											"    if (responseJson.success) {",
											"        console.log('âœ… Step 7: Payout history retrieved');",
											"        console.log('Total Payout:', responseJson.data.summary.total_payout);",
											"        console.log('This Month Payout:', responseJson.data.summary.this_month_payout);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [{"key": "token", "value": "{{agent_token}}", "type": "string"}]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/wallet/payouts",
									"host": ["{{base_url}}"],
									"path": ["wallet", "payouts"]
								}
							}
						}
					]
				}
			]
		}
	]
}